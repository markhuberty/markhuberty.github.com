<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<html lang="en"> 
	<head> 
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
		<title> 
			Mark Huberty
		</title> 
		<meta name="author" content="Mark Huberty"> 
		<meta name="keywords" content="Mark Huberty, Political
Science, University of California, Berkeley"> 
		<meta name="description" content="Mark Huberty is a
graduate student in Political Science at UC Berkeley"> 
		<meta name="robots" content="index, follow, noarchive"> 
		<link rel="stylesheet" href="http://markhuberty.berkeley.edu/css/blueprint/screen.css" type="text/css" media="screen, projection"> 
		<link rel="stylesheet" href="http://markhuberty.berkeley.edu/css/meh-custom.css" rel="stylesheet" type="text/css"> 

<!--
<link rel="stylesheet" href="./blueprint/screen.css" type="text/css" media="screen, projection"> 
<link rel="stylesheet" href="./blueprint/meh-custom.css" rel="stylesheet" type="text/css"> -->
</head>

<body>
<!-- Headers --> 
		<div class="container"> 
			<div class="column span-24"> 
				<div id="menu_divider"> 
					<h1 class="prepend-top alignLeft"> 
						Mark Huberty
					</h1> 
				</div><!-- MAIN MENU: Top horizontal menu of the site.  Use class="here" to turn the current page tab on --> 
				<div id="mainMenu"> 
					<ul class="floatLeft"> 
						<li> 
							<a href="index.html" title="Front Page" >Main</a> 
						</li> 
						<li> 
							<a
						href="publications.html"
						title="Research">Research</a> 
						</li> 
						<li> 
							<a
						href="teaching.html"
						title="Courses and
						other Material">Teaching</a> 
						</li>  
						<li><a
						href="resources.html"
						title="Technology and
						Code"  class="here">Technology
						and Code</a></li> 
						<li> 
							<a
						href="contact.html"
						title="Contact information">Contact</a> 
						</li> 
					</ul> 
				</div> 
			</div> 
		</div><!-- Main Page --> 

		<div class="container prepend-top">   
				  
		   <h3>Installing <tt>gputools</tt> for R</h3>

		  <em>This information current as of 9/2009</em>
		  <br>
		  <p>
		  The gputools package for R provides GPU-enabled versions of common
		  functions in R. As the documentation at the <a href="http://brainarray.mbni.med.umich.edu/Brainarray/Rgpgpu/" ><tt>gputools</tt>
		  website</a> shows, significant reductions in compute time are
		  possible. This page provides some background on installing gputools
		  and the required nVidia software on a Macbook Pro 13 (mid-2009
		  edition) and presents one set of results.
		  </p>
		  
		  <h5>nVidia CUDA software installation</h5>

		  <p>
		  The CUDA installation notes provided <a
		  href="http://developer.download.nvidia.com/compute/cuda/2_3/docs/CUDA_Getting_Started_2.3_MacOS.pdf"
		  >here</a> are complete with the exception of the install order. The correct install order for the nVidia software is Toolkit /
		  Driver / SDK. There is apparently a bug in the toolkit install that
		  can erase the driver if the toolkit install occurs after the driver
		  install. Make sure to pay attention to the environment variable
		  settings. These are the default settings, which are assumed by gputools.
		  </p>
		  
		  <h5><tt>gputools</tt> installation</h5>
		  
		  The installation notes on the <a
		  href="http://brainarray.mbni.med.umich.edu/Brainarray/Rgpgpu/install.txt"
		  >gputools website</a> are a good place to start, but are
		  incomplete. The following changes are required:
		  
		  <ol>
		    <li>It appears that the <a href="http://cran.cnr.berkeley.edu/web/packages/gputools/index.html" >gputools package</a> available via <tt>install.packages()</tt> is old and
		    buggy. You need to download the source code from CRAN, which
		    contains a newer version of the package, and compile it
		    yourself. This will require the compilers available in the Xcode toolset
		    available from the OS X install DVD. The compilation is
		    straightforward: Untar the source file in a temporary directory;
		    this should create a directory called "gputools". Inside that
		    directory, run ./configure. Then go to the /src directory and type
		    "make". This should compile the sources, so that R will allow the
		    package installation.

		    <br>
		    <br>
		    You can then return to the temporary directory and install the resulting
		    package with <tt>R CMD INSTALL gputools</tt>.</li>
		    
		    <li>The environment variable CUDA_HOME must be set to the install
		    location of the nVidia software. This is usually /usr/local/cuda/. The
		    environment variables described in the CUDA installation should also
		    be set.</li>
		    <li>Be sure to run the SDK tools deviceQuery and bandwidthTest as
		    described in the nVidia documentation; if
		    they work, then the CUDA software is set up correctly, and any
		    problems that gputools is having are the result of communications
		    between R and the CUDA install.</li>
		  </ol>

		  <p>
		  The plot below shows the scaling of a granger
		  causality test on a GPU versus a standard CPU as the
		  number of variables scales.
		  </p>
		  <img width=200 src="./images/grangerResults.png" >
		</div>
		
		</div>


<hr>
<!-- <address><a href="http://markhuberty.berkeley.edu/">Mark Huberty &lt;markhuberty@berkeley.edu&gt;</a></address> -->
<!-- <\!-- hhmts start -\-> Last modified: Sat May 22 10:56:24 PDT 2010 <\!-- hhmts end -\-> -->
</body> </html>
